# Add deno completions to search path
if [[ ":$FPATH:" != *":/Users/pfista/.zsh/completions:"* ]]; then export FPATH="/Users/pfista/.zsh/completions:$FPATH"; fi
#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#
# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi
# Customize to your needs...
alias ls='ls -Gl'
alias vim='nvim'
alias ip='dig -4 TXT +short o-o.myaddr.l.google.com @ns1.google.com | xargs | tee >(pbcopy)'
alias ol='ollama run deepseek-r1:8b'
alias pn='pnpm'
alias t='turbo'
alias tailscale='/Applications/Tailscale.app/Contents/MacOS/Tailscale'
alias pr='gh pr create --draft --body "" --title'
export GOPATH=$HOME/src/go
export KEYTIMEOUT=1
# Custom vi-mode keybinding overrides (Prezto editor module handles base vi mode)
bindkey '^P' up-history
bindkey '^N' down-history
bindkey '^?' backward-delete-char
bindkey '^h' backward-delete-char
bindkey '^w' backward-kill-word
# ctrl-r starts searching history backward
bindkey '^r' history-incremental-search-backward
PATH=$PATH:$GOPATH/bin
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
export DOCKER_HOST=unix:///Users/pfista/.colima/default/docker.sock
eval "$(fnm env --use-on-cd)"
# pnpm
export PNPM_HOME="/Users/pfista/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
export GPG_TTY=$(tty)
# For 1password SSH auth agent
export SSH_AUTH_SOCK=~/Library/Group\ Containers/2BUA8C4S2C.com.1password/t/agent.sock
# Pyenv (lazy-loaded for faster startup)
export PYENV_ROOT="$HOME/.pyenv"
[[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"

pyenv() {
  unfunction pyenv
  eval "$(command pyenv init -)"
  pyenv "$@"
}
. "/Users/pfista/.deno/env"

source ~/.safe-chain/scripts/init-posix.sh # Safe-chain Zsh initialization script
alias python=python3
alias pip="python3 -m pip"
